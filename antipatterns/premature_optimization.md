# Premature optimization (преждевременная оптимизация)

Оптимизация часто конфликтует с понятностью, переиспользоимостью и поддерживаемостью. Проблема Premature optimization - в попытках оптимизировать ререндер, код становится крайне сложно читать.

Из-за props drilling состояние часто сосредоточено где-то в корневом компоненте дерева:

<img width="614" height="661" alt="image" src="https://github.com/user-attachments/assets/bf12961a-d4da-451c-a8a5-de75dad222db" />

Соответственно, из-за обновления состояния ререндерится будет все дерево. Проблему можно попробовать решить с помощью оборачивания пропсов и компонентов в useMemo, useCallback и React.memo

**Проблемы Premature optimization**

1. Сложно уследить за мемоизацией всех пропсов и компонентов.
При props drilling пропсов много. Если мемоизировать компонент, то надо уследить за тем, чтобы каждый, например, хэндлер был обернут в useCallback, правильно выставлены зависимости. Пропустил какой-то один - и вся оптимизация сломалась.
2. Увеличивается количество кода.
3. Увеличивается визуальный шум и ментальная нагрузка.

**Как исправить?**

1. Использовать мемоизацию только по необходимости. Например, если это обосновано аналитикой из Profiler
2. Использовать более эффективные методы оптимизации.
